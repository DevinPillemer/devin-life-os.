<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Devin's Life OS ‚Äî Interactive (Boulder Edition)</title>
<style>
  :root{
    --navy:#0B1F3B;--charcoal:#2B2B2B;--sand:#EADBC8;--cream:#F7F5F2;--teal:#1CA7A1;--white:#ffffff;
  }
  *{box-sizing:border-box}
  body{font-family:Lato,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--cream);color:var(--navy);margin:0;min-height:100vh;display:flex;flex-direction:column}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:18px 22px;border-bottom:1px solid rgba(0,0,0,.05);background:var(--white);position:sticky;top:0;z-index:10}
  .title h1{font-family:'League Spartan',system-ui,sans-serif;margin:0;font-size:1.6rem}
  .subtitle{font-size:.95rem;opacity:.8}
  .toolbar{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
  .btn{appearance:none;border:1px solid rgba(0,0,0,.1);background:var(--white);color:var(--charcoal);padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:700;transition:all .15s}
  .btn:hover{transform:translateY(-1px);box-shadow:0 4px 10px rgba(0,0,0,.08)}
  .btn.primary{background:var(--teal);color:#fff;border:none}
  .btn.ghost{background:transparent;border:1px dashed rgba(0,0,0,.2)}
  .btn.danger{background:#e0565b;color:#fff;border:none}

  main{width:100%;max-width:1200px;margin:18px auto;padding:0 18px;flex:1}
  .stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(170px,1fr));gap:12px;margin:8px 0 22px}
  .stat{background:#fff;border:1px solid rgba(0,0,0,.06);border-radius:14px;padding:12px;box-shadow:0 6px 14px rgba(0,0,0,.05)}
  .stat .label{font-size:.8rem;opacity:.7}
  .stat .value{font-weight:900;font-size:1.2rem;margin-top:4px}
  .stage-toggle{display:flex;gap:8px;flex-wrap:wrap;margin:6px 0 18px}
  .stage-toggle .chip{padding:6px 10px;border-radius:999px;border:1px solid rgba(0,0,0,.15);cursor:pointer;font-weight:700}
  .chip.active{background:var(--navy);color:#fff;border-color:var(--navy)}

  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(190px,1fr));gap:22px}
  .card{background:var(--sand);border-radius:16px;padding:18px 16px;box-shadow:0 6px 14px rgba(0,0,0,.09);cursor:pointer;transition:all .18s}
  .card:hover{transform:translateY(-2px);box-shadow:0 10px 18px rgba(0,0,0,.14)}
  .icon{font-size:1.8rem;margin-bottom:8px}
  .tag{opacity:.8;margin-top:6px;font-size:.9rem}
  .progress{height:8px;background:rgba(255,255,255,.7);border-radius:999px;overflow:hidden;margin-top:12px}
  .bar{height:100%;background:var(--teal);width:0%;transition:width .4s ease}

  /* Overlay */
  .overlay{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;padding:20px;z-index:20}
  .panel{background:#fff;color:var(--navy);width:min(860px,96vw);border-radius:18px;box-shadow:0 16px 40px rgba(0,0,0,.25);padding:22px 22px 26px}
  .panel header{position:relative;border:none;padding:0 0 10px 0}
  .close{position:absolute;right:-6px;top:-6px;background:transparent;border:none;font-size:1.4rem;cursor:pointer;color:var(--charcoal)}
  .panel h2{font-family:'League Spartan',system-ui,sans-serif;margin:6px 0 6px}
  .meta{margin:8px 0 14px;font-size:.95rem}
  .tabs{display:flex;gap:8px;flex-wrap:wrap;margin:10px 0 12px}
  .tab{padding:6px 10px;border-radius:999px;border:1px solid rgba(0,0,0,.15);cursor:pointer;font-weight:800}
  .tab.active{background:var(--navy);color:#fff;border-color:var(--navy)}
  .panel ul{margin:10px 0 0 18px}
  .panel li{margin:6px 0}
  .panel .row{display:flex;gap:14px;align-items:center;margin-top:14px}
  .panel label{font-weight:700}
  input[type="range"]{width:200px}
  .small{font-size:.85rem;opacity:.8}

  /* Timeline */
  .timeline-wrap{display:none;background:#fff;border:1px solid rgba(0,0,0,.06);border-radius:16px;padding:14px;box-shadow:0 8px 20px rgba(0,0,0,.06);margin-top:20px}
  .timeline-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
  .timeline{display:grid;grid-template-columns:160px repeat(4,minmax(220px,1fr));overflow:auto}
  .timeline .colhead{font-weight:900;padding:8px;border-bottom:1px solid rgba(0,0,0,.08)}
  .timeline .row{display:contents}
  .timeline .label{padding:10px;font-weight:900;border-right:1px solid rgba(0,0,0,.06);background:#faf9f6}
  .cell{padding:10px;border-bottom:1px dashed rgba(0,0,0,.08);cursor:pointer}
  .cell:hover{background:#F7F5F2}

  footer{padding:18px;text-align:center;font-size:.85rem;opacity:.8}
</style>
</head>
<body>
  <header>
    <div class="title">
      <h1>Devin's Life OS</h1>
      <div class="subtitle">Show Up. Serve. Build. Repeat.</div>
    </div>
    <div class="toolbar">
      <button class="btn" id="playBtn" title="Auto-run tour">‚ñ∂ Play</button>
      <button class="btn" id="timelineBtn" title="Toggle timeline">üïí Timeline</button>
      <button class="btn" id="editBtn" title="Edit all data as JSON">‚úé Edit</button>
      <button class="btn primary" id="saveBtn" title="Save to this browser">Save</button>
      <button class="btn danger" id="resetBtn" title="Reset to defaults">Reset</button>
      <a class="btn ghost" id="notionLink" href="#" target="_blank">Open Notion</a>
    </div>
  </header>

  <main>
    <div class="stage-toggle">
      <div class="chip active" data-stage="current">Now</div>
      <div class="chip" data-stage="y5">5 Years</div>
      <div class="chip" data-stage="y10">10 Years</div>
      <div class="chip" data-stage="y15">15 Years</div>
    </div>

    <section class="stats" id="stats"></section>

    <section class="grid" id="pillarsGrid"></section>

    <section class="timeline-wrap" id="timelineWrap">
      <div class="timeline-head">
        <strong>Integrated 0‚Üí15 Year Timeline</strong>
        <span class="small">Click any milestone to open details</span>
      </div>
      <div class="timeline" id="timeline"></div>
    </section>
  </main>

  <footer>
    Tip: Click a pillar to view its Massive Action Plan. Use <strong>Edit</strong> to tweak anything, then <strong>Save</strong>. Your data is stored locally in your browser.
  </footer>

  <!-- Overlay -->
  <div class="overlay" id="overlay">
    <div class="panel">
      <header>
        <button class="close" id="closeOverlay">‚úñ</button>
        <h2 id="o_title"></h2>
        <div class="tabs">
          <div class="tab active" data-tab="current">Now</div>
          <div class="tab" data-tab="y5">5Y</div>
          <div class="tab" data-tab="y10">10Y</div>
          <div class="tab" data-tab="y15">15Y</div>
        </div>
        <div class="meta"><strong>Result:</strong> <span id="o_result"></span></div>
        <div class="meta"><strong>Purpose:</strong> <span id="o_purpose"></span></div>
      </header>
      <ul id="o_map"></ul>
      <div class="row">
        <label for="o_progress">Progress</label>
        <input type="range" id="o_progress" min="0" max="100" step="1" />
        <span id="o_progress_val" class="small"></span>
      </div>
    </div>
  </div>

  <!-- Edit Modal -->
  <div class="overlay" id="modal">
    <div class="panel" style="width:min(980px,96vw)">
      <header>
        <button class="close" id="closeModal">‚úñ</button>
        <h2>Edit Life OS Data (JSON)</h2>
      </header>
      <textarea id="editor" style="width:100%;min-height:380px;border:1px solid rgba(0,0,0,.1);border-radius:12px;padding:10px;font-family:ui-monospace,Menlo,Monaco,Consolas,'Liberation Mono','Courier New',monospace;font-size:.9rem"></textarea>
      <div class="small" style="margin-top:10px">Only change text/percentages/links. Click <strong>Save</strong> in the top bar when done.</div>
    </div>
  </div>

<script>
  const DEFAULT_DATA = {
    global:{
      notionUrl:'https://www.notion.so/your-life-os',
      stats:{
        current:{ body_fat:'12‚Äì15%', passive_income:'$2k/mo', properties:1, kids:1, travel_days:20, charity:'$1k/yr' },
        y5:{ body_fat:'~10%', passive_income:'$7‚Äì10k/mo', properties:4, kids:2, travel_days:35, charity:'$5k/yr' },
        y10:{ body_fat:'~10%', passive_income:'$15k+/mo', properties:10, kids:3, travel_days:45, charity:'$15k/yr' },
        y15:{ body_fat:'~10%', passive_income:'$20k+/mo', properties:12, kids:3, travel_days:60, charity:'$25k+/yr' }
      }
    },
    pillars:[
      { key:'health', icon:'üèãÔ∏è‚Äç‚ôÇÔ∏è', name:'Health', tagline:'Strong body, unstoppable life',
        stages:{
          current:{
            result:'Training 5x/week; cholesterol management; optimize T; target 10‚Äì12% BF',
            purpose:'Energy is life. If I control my body, I control my future.',
            map:[
              'Strength train 4‚Äì5x/week (weights + cardio)',
              'Swim/run sessions; Garmin tracking',
              'Eat clean 6 days/week (meal prep Sun)',
              'Sleep 7+ hrs/night; daily mobility 10 min',
              'Quarterly bloodwork; adjust plan'
            ]
          },
          y5:{
            result:'10% BF year-round, visible 6-pack, high T; optimal bloods',
            purpose:'Make vitality automatic through systems.',
            map:[
              'Maintain lean, jacked build (V‚Äëtaper)',
              'Competitive swim/run targets',
              'Home recovery stack (sauna/cold/mobility)',
              'Zero injuries via prehab routine'
            ]
          },
          y10:{
            result:'Physique maintained effortlessly; peak functional strength',
            purpose:'Be the dad who can do everything.',
            map:[
              'Home gym + pool; daily movement culture',
              'Mentor younger men in health basics',
              'Annual longevity screen; GLP-1 free; lifestyle-first'
            ]
          },
          y15:{
            result:'Vital, lean, athletic vacations with family',
            purpose:'Model strength, discipline, and joy.',
            map:[
              'Surf/ski/hike trips with kids',
              'Mobility at 95th percentile for age',
              'Community role model for healthy living'
            ]
          }
        },
        progress:{ current:40, y5:20, y10:0, y15:0 }
      },
      { key:'finance', icon:'üí∞', name:'Finance', tagline:'Freedom by design',
        stages:{
          current:{
            result:'Head of BD (Panaya); 1 Be‚Äôer Sheva rental; Miami plan starting',
            purpose:'Finance fuels freedom, giving, and time with family.',
            map:[
              'Build agency as side (ethical, slow)',
              'Deposit to IBKR; diversified ETFs; rebal 6‚Äì12m',
              'Property scouting & cash-flow modeling'
            ]
          },
          y5:{
            result:'3‚Äì4 properties; agency profitable; $15k/mo total income',
            purpose:'Replace most active income with systems.',
            map:[
              'Acquire 1‚Äì2 doors/yr in solid zip codes',
              'Documented ops + VAs; AI for outreach/reporting',
              'Tax strategy + trust basics in place'
            ]
          },
          y10:{
            result:'10+ properties; business covers lifestyle; choose-only work',
            purpose:'Time autonomy as default.',
            map:[
              '80% delegated; 3‚Äì5 team members',
              'Advisory retainers > project work',
              'Family trust + insurance optimized'
            ]
          },
          y15:{
            result:'FI ‚Äî work optional; philanthropy funded by cash flow',
            purpose:'Create impact without income pressure.',
            map:[
              'Legacy real estate + index core',
              'Annual donor-advised fund contributions',
              'Periodic liquidity events as upside'
            ]
          }
        },
        progress:{ current:42, y5:25, y10:10, y15:0 }
      },
      { key:'family', icon:'‚ù§Ô∏è', name:'Family', tagline:'Love is the foundation',
        stages:{
          current:{
            result:'Married to Daphna; 1 child (Lior); weekly date nights',
            purpose:'Family is the source of joy, drive, and legacy.',
            map:[
              'Daily act of love for Daphna',
              'Sunday storytelling with Lior',
              'Monthly family adventure; photo journal'
            ]
          },
          y5:{
            result:'2 kids; outdoor lifestyle; strong marriage rituals',
            purpose:'Create memories and resilience together.',
            map:[
              'Annual beach/ski trips',
              'Sports for kids; parent-child 1:1 time',
              'Quarterly couple‚Äôs retreat/day'
            ]
          },
          y10:{
            result:'3 kids (maybe 4); robust family traditions',
            purpose:'Raise confident, values-driven kids.',
            map:[
              'Shabbat dinners w/ guests',
              'Annual big trip; service project together',
              'Kids manage micro-budgets for trips'
            ]
          },
          y15:{
            result:'Teens/young adults thriving; family retreats',
            purpose:'A home base they want to return to.',
            map:[
              'Legacy scrapbook & videos',
              'Multigenerational trip tradition'
            ]
          }
        },
        progress:{ current:55, y5:30, y10:10, y15:0 }
      },
      { key:'judaism', icon:'‚ú°Ô∏è', name:'Judaism & Service', tagline:'Rooted in faith, giving in action',
        stages:{
          current:{
            result:'Weekly Torah; Shabbat anchor; tzedakah; synagogue ties',
            purpose:'Faith is my compass; service is my action.',
            map:[
              'Daily tefillah (short siddur block)',
              'Monthly charity + volunteer hour',
              'Host Shabbat dinners with friends'
            ]
          },
          y5:{
            result:'Kids in Jewish education; consistent giving; lead small group',
            purpose:'Build roots that last generations.',
            map:[
              'Family mitzvah projects each quarter',
              'Learn with chavruta weekly',
              'Israel trip cadence if in Miami'
            ]
          },
          y10:{
            result:'Community leadership; significant philanthropy',
            purpose:'Scale service as capacity grows.',
            map:[
              'Sponsor programs quietly',
              'Mentor younger families in practice'
            ]
          },
          y15:{
            result:'Family charity fund; children active in service',
            purpose:'Joyful, sustainable Jewish life.',
            map:[
              'Annual giving plan w/ kids',
              'Teach/lead in areas of strength'
            ]
          }
        },
        progress:{ current:60, y5:35, y10:15, y15:5 }
      },
      { key:'personal', icon:'üß†', name:'Personal & Social', tagline:'Growth in mind, heart, and soul',
        stages:{
          current:{ result:'Journaling; Torah learning; tight friend circle', purpose:'Grow wiser and kinder each year.', map:['Daily journal (5 min)','Weekly gratitude + reflection','2 quality hangouts/week'] },
          y5:{ result:'Expanded network; 2 friend trips/yr', purpose:'Community that sharpens me.', map:['Active hobbies together','Mini‚Äëretreats; no phones blocks'] },
          y10:{ result:'Mentorship & community roles', purpose:'Give what I‚Äôve learned.', map:['Host roundtables','Coach selectively'] },
          y15:{ result:'Lifelong bonds; shaping next generation', purpose:'Leave people better.', map:['Annual friend-family retreat'] }
        },
        progress:{ current:48, y5:25, y10:10, y15:5 }
      },
      { key:'lifestyle', icon:'üåé', name:'Lifestyle', tagline:'Live fully, now',
        stages:{
          current:{ result:'Tel Aviv beach life; quarterly trips', purpose:'Joy fuels performance.', map:['Weekly new experience','Document trips (photos/journal)'] },
          y5:{ result:'Miami ‚áÑ TLV dual base; adventure trips', purpose:'Design days I love.', map:['Quarterly adventures booked early'] },
          y10:{ result:'Multiple homes; private retreats', purpose:'Presence over busyness.', map:['Annual exotic travel','Seasonal sabbaticals'] },
          y15:{ result:'Fully free lifestyle; legacy homes', purpose:'Memories over things.', map:['Family traditions locked in'] }
        },
        progress:{ current:36, y5:20, y10:10, y15:5 }
      }
    ]
  };

  const LS_KEY = 'devin_life_os_v2_boulder';
  let state = load();
  let globalStage = 'current';

  function load(){ try{const raw=localStorage.getItem(LS_KEY);return raw?JSON.parse(raw):structuredClone(DEFAULT_DATA);}catch(e){return structuredClone(DEFAULT_DATA)} }
  function save(){ localStorage.setItem(LS_KEY, JSON.stringify(state)); }
  function reset(){ state = structuredClone(DEFAULT_DATA); save(); renderAll(); }

  // STATS PANEL
  const statsEl = document.getElementById('stats');
  function renderStats(){
    const s = state.global.stats[globalStage];
    statsEl.innerHTML = `
      <div class="stat"><div class="label">Body Fat</div><div class="value">${s.body_fat}</div></div>
      <div class="stat"><div class="label">Passive Income</div><div class="value">${s.passive_income}</div></div>
      <div class="stat"><div class="label">Properties</div><div class="value">${s.properties}</div></div>
      <div class="stat"><div class="label">Kids</div><div class="value">${s.kids}</div></div>
      <div class="stat"><div class="label">Travel Days/Year</div><div class="value">${s.travel_days}</div></div>
      <div class="stat"><div class="label">Annual Charity</div><div class="value">${s.charity}</div></div>
    `;
  }

  // PILLARS GRID
  const grid = document.getElementById('pillarsGrid');
  function renderGrid(){
    grid.innerHTML = '';
    state.pillars.forEach(p => {
      const pr = p.progress?.[globalStage]||0;
      const card = document.createElement('div');
      card.className='card';
      card.dataset.key=p.key;
      card.innerHTML = `
        <div class="icon">${p.icon}</div>
        <div style="font-weight:800">${p.name}</div>
        <div class="tag">${p.tagline}</div>
        <div class="progress"><div class="bar" style="width:${pr}%"></div></div>
      `;
      card.addEventListener('click',()=>openOverlay(p.key, globalStage));
      grid.appendChild(card);
    })
  }

  // TIMELINE
  const timelineWrap = document.getElementById('timelineWrap');
  const timeline = document.getElementById('timeline');
  function renderTimeline(){
    timeline.innerHTML = '';
    const heads = ['Pillar','Now','5 Years','10 Years','15 Years'];
    heads.forEach((h,i)=>{
      const d = document.createElement('div'); d.className='colhead'; d.textContent=h; timeline.appendChild(d);
    });
    state.pillars.forEach(p=>{
      const rowKeys = ['current','y5','y10','y15'];
      const row = document.createElement('div'); row.className='row';
      const label = document.createElement('div'); label.className='label'; label.textContent=`${p.icon} ${p.name}`; timeline.appendChild(label);
      rowKeys.forEach(st=>{
        const cell = document.createElement('div'); cell.className='cell';
        const stData = p.stages[st];
        cell.innerHTML = `<strong>${stData.result}</strong><br><span class="small">${(stData.map[0]||'').split('(')[0]}</span>`;
        cell.addEventListener('click',()=>openOverlay(p.key, st));
        timeline.appendChild(cell);
      });
    });
  }

  // OVERLAY
  const overlay = document.getElementById('overlay');
  const o_title = document.getElementById('o_title');
  const o_result = document.getElementById('o_result');
  const o_purpose = document.getElementById('o_purpose');
  const o_map = document.getElementById('o_map');
  const o_progress = document.getElementById('o_progress');
  const o_progress_val = document.getElementById('o_progress_val');

  function openOverlay(key, stage){
    const p = state.pillars.find(x=>x.key===key);
    overlay.style.display='flex';
    overlay.dataset.key = key; overlay.dataset.stage = stage||'current';
    o_title.textContent = `${p.icon} ${p.name} ‚Äî ${p.tagline}`;
    setOverlayStage(stage||'current');
  }
  function setOverlayStage(stage){
    const key = overlay.dataset.key; const p = state.pillars.find(x=>x.key===key);
    const st = p.stages[stage];
    document.querySelectorAll('.tab').forEach(t=>t.classList.toggle('active', t.dataset.tab===stage));
    overlay.dataset.stage = stage;
    o_result.textContent = st.result; o_purpose.textContent = st.purpose; o_map.innerHTML='';
    st.map.forEach(it=>{ const li=document.createElement('li'); li.textContent=it; o_map.appendChild(li); });
    const prog = p.progress?.[stage]||0; o_progress.value = prog; o_progress_val.textContent = `${prog}%`;
  }
  function closeOverlay(){ overlay.style.display='none'; }
  document.getElementById('closeOverlay').addEventListener('click', closeOverlay);
  overlay.addEventListener('click', (e)=>{ if(e.target===overlay) closeOverlay(); });
  document.querySelectorAll('.tab').forEach(t=> t.addEventListener('click', ()=> setOverlayStage(t.dataset.tab)) );
  o_progress.addEventListener('input', (e)=>{ o_progress_val.textContent = `${e.target.value}%`; });
  o_progress.addEventListener('change', (e)=>{
    const p = state.pillars.find(x=>x.key===overlay.dataset.key);
    const st = overlay.dataset.stage; p.progress[st] = Number(e.target.value); save(); renderGrid();
  });

  // STAGE CHIPS
  document.querySelectorAll('.chip').forEach(ch=> ch.addEventListener('click',()=>{
    document.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
    ch.classList.add('active'); globalStage = ch.dataset.stage; renderStats(); renderGrid();
  }));

  // EDIT MODAL
  const modal = document.getElementById('modal');
  const editor = document.getElementById('editor');
  document.getElementById('editBtn').addEventListener('click', ()=>{ editor.value = JSON.stringify(state, null, 2); modal.style.display='flex'; });
  document.getElementById('closeModal').addEventListener('click', ()=>{ modal.style.display='none'; });
  document.getElementById('saveBtn').addEventListener('click', ()=>{
    if(modal.style.display==='flex'){
      try{ state = JSON.parse(editor.value); save(); modal.style.display='none'; renderAll(); }
      catch(err){ alert('Invalid JSON. Please fix and try again.'); return; }
    } else { save(); }
  });
  document.getElementById('resetBtn').addEventListener('click', ()=>{ if(confirm('Reset to defaults?')) reset(); });

  // TIMELINE TOGGLE
  const timelineBtn = document.getElementById('timelineBtn');
  timelineBtn.addEventListener('click', ()=>{ const show = timelineWrap.style.display!=='block'; timelineWrap.style.display = show?'block':'none'; if(show) renderTimeline(); });

  // NOTION LINK
  document.getElementById('notionLink').href = state.global.notionUrl || '#';

  // PLAY TOUR
  let tourTimer=null; let tourIdx=0; let stageIdx=0; const stageSeq=['current','y5','y10','y15'];
  function playTour(){
    if(tourTimer){ clearInterval(tourTimer); tourTimer=null; return; }
    const keys = state.pillars.map(p=>p.key);
    tourIdx = 0; stageIdx = 0; openOverlay(keys[tourIdx], stageSeq[stageIdx]);
    tourTimer = setInterval(()=>{
      stageIdx++; if(stageIdx>=stageSeq.length){ stageIdx=0; tourIdx=(tourIdx+1)%keys.length; }
      openOverlay(keys[tourIdx], stageSeq[stageIdx]);
    }, 5000);
  }
  document.getElementById('playBtn').addEventListener('click', playTour);

  function renderAll(){ renderStats(); renderGrid(); if(timelineWrap.style.display==='block') renderTimeline(); }

  // INIT
  renderAll();
</script>
</body>
</html>
